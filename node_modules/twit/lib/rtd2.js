//
//  RTD2 - Twitter bot that tweets about the most popular github.com news
//  Also makes new friends and prunes its followings.
//
var Bot = require('./bot'),
        config1 = require('././node_modules/twit/config1');

    var bot = new Bot(config1);

console.log('RTD2: Running.');







stream.on('connect', function (request) {
  //bot.twit.post('statuses/update', { status: "@CyrisXD" + " I am reconnected" }, function (err, reply) { });
    console.log("Stream ON");

});


var stream = bot.twit.stream('statuses/filter', { track: '@CyBotXD' });
 streams.on('tweet', function (tweet) {
  
            console.log("Tweet Log");
            screenName = tweet.user.screen_name;
            question = tweet.text.replace("@CyBotXD", "");

            var options = {
                host: 'botsta.com',
                port: 80,
                path: '/api.php' + question
            };

            console.log(question);
            http.get("http://botsta.com/api.php?input=" + question, function (resp) {
                resp.setEncoding('utf8');
                resp.on('data', function (chunk) {
                    answer = chunk;
                    bot.twit.post('statuses/update', { status: "@" + screenName + " " + answer }, function (err, reply) { });
                });

            }).on("error", function (e) {
                console.log("Got error: " + e.message);
            });
        });


 streams.on('disconnect', function (disconnectMessage) {
  //bot.twit.post('statuses/update', { status: "@CyrisXD" + " I was disconnected" }, function (err, reply) { });
console.log("Stream OFF");
});



function handleError(err) {
  console.error('response status:', err.statusCode);
  console.error('data:', err.data);
}
